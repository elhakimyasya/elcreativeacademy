function elcreativeAuthLogin(){firebase.auth().onAuthStateChanged(function(a){a?(window.location.href=authProfilePage,localStorage.setItem("auth_image",a.photoURL)):localStorage.removeItem("auth_image")});var a={signInSuccessUrl:!1,signInOptions:[firebase.auth.GoogleAuthProvider.PROVIDER_ID],tosUrl:!1};new firebaseui.auth.AuthUI(firebase.auth()).start("#firebaseui-auth-container",a)}function elcreativeAuthProfile(){firebase.auth().onAuthStateChanged(function(a){if(a){document.getElementById("auth_logout").onclick=function(){firebase.auth().signOut(),localStorage.removeItem("auth_image")},document.querySelector(".auth_profile_container").innerHTML="<div class=\"auth_profile\"><div class=\"auth_avatar\"><span class=\"lazyload shimmer\" data-image=\""+a.photoURL+"\"/></div><div class=\"auth_info\"><div class=\"auth_name\">"+a.displayName+"</div><div class=\"auth_email\">"+a.email+"</div><div class=\"auth_action\"><a href=\"/p/"+authCreatePost+"\">Create Posts</a></div></div></div>";var b=firebase.database().ref().child("Users/"+a.uid);b.update({userData:{userEmail:a.email,userName:a.displayName,userPhotoUrl:a.photoURL,userUID:a.uid}});var c=firebase.database().ref().child("Users/"+a.uid).child("userPost");c.once("value",function(b){var c="";b.forEach(function(b){a=b.val(),c="<div class=\"auth_article\"><div class=\"article_info\"><a href=\""+authUserPostPage+"?id="+b.getKey()+"\" title=\""+a.title+"\">"+a.title+"</a><small>"+a.author+" - "+datetimeFormat(a.updated)+" | <a href=\""+authEditPost+"?id="+b.getKey()+"\" style=\"display:inline\">Edit</a></small></div><div class=\"article_action\"><small>Pending</small></div></div>"+c}),""!=c&&(document.querySelector(".elcreative_tab .tab_button_container").innerHTML+="<button id='tab_button_post' class='tab_button elcreative_ripple' type='button' aria-label='Posts' data-toggle-target='#tab_panel_post' aria-controls='tab_panel_post' role='tab' aria-selected='true' data-toggle-radio-group='tab_auth' data-toggle-arrows='' data-toggle-class='' data-toggle-is-active=''>Your Posts</button>",document.querySelector(".elcreative_tab").innerHTML+="<div id='tab_panel_post' class='tab_panel_content tab_panel_post' role='tabpanel' aria-labelledby='tab_button_post' aria-hidden='true'>"+c+"</div>",easyToggleState())})}else window.location.href=authLoginPage})}function elcreativeAuthPost(){firebase.auth().onAuthStateChanged(function(a){var b,c,d,e;a?(b=(b="id",c={},window.location.href.split("?").pop().split("&").map(function(a){a=a.split("="),c[a[0]]=a[1]}),b?c[b]||null:c))?(d=!1,e=(a=firebase.database().ref("Users/"+a.uid)).child("userPost").child(b),e.on("value",function(a){var b=a.val();b?(document.querySelector(".panel_content").innerHTML=b.content,d||(d=!0,e.child("views").transaction(function(a){return(a||0)+1})),document.querySelector(".Blog .post_title").innerText=b.title):window.location.href=authProfilePage}),document.getElementById("auth_post_update").setAttribute("href",authEditPost+"?id="+b),document.getElementById("auth_post_delete").addEventListener("click",function(){confirm("Are you sure to delete this post?")&&(e.remove(),window.location.href=authProfilePage)})):window.location.href=authProfilePage:window.location.href=authLoginPage})}function elcreativeAuthPostEdit(){firebase.auth().onAuthStateChanged(function(a){var b,c,d,e;a?(b=(d="id",e={},window.location.href.split("?").pop().split("&").map(function(a){a=a.split("="),e[a[0]]=a[1]}),d?e[d]||null:e))?((c=firebase.database().ref("Users/"+a.uid).child("userPost").child(b)).once("value",function(a){a=a.val(),null===a?window.location.href=authProfilePage:(document.getElementById("auth_input_post_title").value=a.title,document.getElementById("auth_input_post_description").value=a.description,document.getElementById("auth_input_post_label").value=a.labels,document.getElementById("auth_input_post_content").value=a.content,tinymce.init({selector:"textarea",height:500,invalid_styles:{'table':'width height','tr':'width height','th':'width height','td':'width height'},branding:!1,menubar:"file edit view insert format tools table",plugins:"link image preview toc codesample table wordcount code lists insertdatetime emoticons visualblocks",toolbar:"formatselect | bold italic underline strikethrough superscript subscript blockquote | link image |  alignleft aligncenter alignright alignjustify bullist numlist | table toc | codesample preview insertdatetime emoticons visualblocks code",toc_class:"elcTOC",toc_depth:6,content_style:"body { font-family: \"Segoe UI\"}",codesample_languages:[{text:"Command Line",value:"command hljs hl hljs"},{text:"CSS",value:"css hljs hl css"},{text:"C",value:"c hljs hl c"},{text:"C++",value:"cpp hljs hl cpp"},{text:"HTML/XML",value:"html hljs hl html xml"},{text:"Java",value:"java hljs hl java"},{text:"JavaScript",value:"javascript hljs hl javascript"},{text:"JSON",value:"json hljs hl json"},{text:"Markdown",value:"markdown hljs hl markdown"},{text:"PHP",value:"php hljs hl php"},{text:"Python",value:"python hljs hl python"},{text:"TypeScript",value:"typescript hljs hl typescript"}],insertdatetime_formats:["Updated: %A, %d %B %Y"],rel_list:[{title:"Internal Link",value:""},{title:"External Link",value:"noopener noreferer nofollow"}],extended_valid_elements:"img[src|loading=lazy|alt|title|width|height|align|onmouseover|onmouseout|name]",init_instance_callback:function(){}}))}),document.getElementById("auth_post_edit").addEventListener("submit",function(d){d.preventDefault();var e={'"':"'",mcetoc:"elcreative_toc"};d=tinymce.get("auth_input_post_content").getContent().replace(/"|mcetoc/g,function(a){return e[a]});var f=unescape(d);return c.transaction(function(b){return(b=b||{}).title=document.getElementById("auth_input_post_title").value,b.description=document.getElementById("auth_input_post_description").value,b.labels=document.getElementById("auth_input_post_label").value,b.content=f,b.updated=new Date().getTime(),b.author=a.displayName,b}).then(function(){window.location.href=authUserPostPage+"?id="+b}).catch(function(a){console.log(a)}),!1})):window.location.href=authProfilePage:window.location.href=authLoginPage})}function elcreativeAuthPostCreate(){firebase.auth().onAuthStateChanged(function(a){a?(tinymce.init({selector:"textarea",height:500,invalid_styles:{'table':'width height','tr':'width height','th':'width height','td':'width height'},branding:!1,menubar:"file edit view insert format tools table",plugins:"link image preview toc codesample table wordcount code lists insertdatetime emoticons visualblocks",toolbar:"formatselect | bold italic underline strikethrough superscript subscript blockquote | link image |  alignleft aligncenter alignright alignjustify bullist numlist | table toc | codesample preview insertdatetime emoticons visualblocks code",toc_class:"elcTOC",toc_depth:6,content_style:"body { font-family: \"Segoe UI\"}",codesample_languages:[{text:"Command Line",value:"command hljs hl hljs"},{text:"CSS",value:"css hljs hl css"},{text:"C",value:"c hljs hl c"},{text:"C++",value:"cpp hljs hl cpp"},{text:"HTML/XML",value:"html hljs hl html xml"},{text:"Java",value:"java hljs hl java"},{text:"JavaScript",value:"javascript hljs hl javascript"},{text:"JSON",value:"json hljs hl json"},{text:"Markdown",value:"markdown hljs hl markdown"},{text:"PHP",value:"php hljs hl php"},{text:"Python",value:"python hljs hl python"},{text:"TypeScript",value:"typescript hljs hl typescript"}],insertdatetime_formats:["Updated: %A, %d %B %Y"],rel_list:[{title:"Internal Link",value:""},{title:"External Link",value:"noopener noreferer nofollow"}],extended_valid_elements:"img[src|loading=lazy|alt|title|width|height|align|onmouseover|onmouseout|name]",init_instance_callback:function(){}}),document.getElementById("btn_create").addEventListener("click",function(b){b.preventDefault(),document.getElementById("btn_create").remove(),functionSnackbar("Uploading\u2026",5e3),(b={}).title=document.getElementById("auth_input_post_title").value,b.description=document.getElementById("auth_input_post_description").value,b.labels=document.getElementById("auth_input_post_label").value,b.content=tinymce.get("auth_input_post_content").getContent(),b.created=new Date().getTime(),b.updated=b.created,b.author=a.displayName,b.views=0,b.status="Pending";var c=firebase.database().ref("Users/"+a.uid),d=c.child("userProfile").child("userPoints"),e=c.child("userPost");return d.transaction(function(a){return(a||0)+10}),e.push(b).then(function(a){window.location.href=authUserPostPage+"?id="+a.getKey()}).catch(function(a){console.log(a)}),!1})):window.location.href=authLoginPage})}function datetimeFormat(a){return(a=new Date(a)).getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()]+" "+pad2Digit(a.getFullYear())}function pad2Digit(a){return("0"+a.toString()).slice(-4)}function strip(a){var b=document.createElement("DIV");return b.innerHTML=a,b.textContent||b.innerText||""}firebase.initializeApp(firebaseConfig);
